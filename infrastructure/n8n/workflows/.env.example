# n8n 2captcha Worker - Environment Variables Template

# Copy this file and rename to .env
# Add your actual values and source it before starting n8n

# ============================================================================
# 2CAPTCHA CREDENTIALS (REQUIRED)
# ============================================================================
# Your 2captcha.com login email address
TWOCAPTCHA_EMAIL="your-email@example.com"

# Your 2captcha.com login password
# ⚠️ DO NOT COMMIT THIS FILE TO GIT
# ⚠️ USE STRONG PASSWORD (min 12 chars, special chars recommended)
TWOCAPTCHA_PASSWORD="secure-password-here"

# ============================================================================
# STEEL BROWSER CONFIGURATION (REQUIRED)
# ============================================================================
# URL where Steel Browser service is running
# Default: http://localhost:3000
# Docker: http://steel-browser:3000
# Production: https://steel-browser.delqhi.com
STEEL_BROWSER_URL="http://localhost:3000"

# Steel Browser API Key (if required by your instance)
# Leave empty if not using authentication
STEEL_BROWSER_API_KEY=""

# ============================================================================
# CONSENSUS SOLVER WEBHOOK (REQUIRED)
# ============================================================================
# URL of your consensus solver webhook endpoint
# Expected response: { "solution": "...", "confidence": 95.5 }
CONSENSUS_SOLVER_WEBHOOK_URL="http://localhost:8080/api/solve"

# Solver API Key (if webhook requires authentication)
CONSENSUS_SOLVER_API_KEY=""

# Solver timeout in milliseconds (default: 30000)
CONSENSUS_SOLVER_TIMEOUT="30000"

# ============================================================================
# TELEGRAM NOTIFICATIONS (OPTIONAL)
# ============================================================================
# Your Telegram Bot HTTP API webhook URL
# Format: https://api.telegram.org/bot<BOT_TOKEN>/sendMessage
# Create bot at: https://t.me/BotFather
TELEGRAM_WEBHOOK_URL="https://api.telegram.org/bot<YOUR_BOT_TOKEN>/sendMessage"

# Your Telegram Chat ID (where to receive notifications)
# Find your ID at: https://t.me/userinfobot
TELEGRAM_CHAT_ID="123456789"

# Enable Telegram notifications (true/false)
TELEGRAM_ENABLED="true"

# ============================================================================
# WORKFLOW CONFIGURATION (OPTIONAL)
# ============================================================================
# Break duration (in minutes) - range is 5-15
BREAK_MIN_DURATION="5"
BREAK_MAX_DURATION="15"

# Maximum iterations per session (default: 100)
MAX_ITERATIONS="100"

# Session timeout in minutes (default: 150 = 2.5 hours)
SESSION_DURATION_MINUTES="150"

# Screenshot quality (1-100, default: 85)
SCREENSHOT_QUALITY="85"

# ============================================================================
# N8N CONFIGURATION
# ============================================================================
# N8N Host (for webhook URLs generated by n8n)
N8N_HOST="http://localhost:5678"

# N8N Base URL (for accessing n8n externally)
N8N_BASE_URL="http://localhost:5678"

# Save workflow executions locally
N8N_SAVE_EXECUTIONS="true"

# Execution data TTL (keep for 24 hours)
N8N_EXECUTION_DATA_TTL="86400"

# ============================================================================
# SECURITY & LOGGING
# ============================================================================
# Enable debug logging
DEBUG="false"

# Log level: debug, info, warn, error
LOG_LEVEL="info"

# Save screenshots to disk for debugging (true/false)
SAVE_SCREENSHOTS="false"

# Screenshot save directory
SCREENSHOT_DIR="/tmp/n8n-captcha-screenshots"

# ============================================================================
# ADVANCED OPTIONS
# ============================================================================
# User Agent for Steel Browser
USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"

# Proxy (if needed to rotate IPs)
# Format: http://user:pass@proxy.example.com:8080
HTTP_PROXY=""
HTTPS_PROXY=""

# Retry attempts for failed operations
MAX_RETRIES="3"

# Retry delay in seconds
RETRY_DELAY="5"

# ============================================================================
# EXAMPLE COMPLETE CONFIGURATION
# ============================================================================
# Uncomment and modify the section below if you want a working example:
#
# TWOCAPTCHA_EMAIL="worker@example.com"
# TWOCAPTCHA_PASSWORD="SecurePass123!@#"
# STEEL_BROWSER_URL="http://localhost:3000"
# CONSENSUS_SOLVER_WEBHOOK_URL="http://localhost:8080/api/solve"
# TELEGRAM_WEBHOOK_URL="https://api.telegram.org/bot123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11/sendMessage"
# TELEGRAM_CHAT_ID="987654321"
# TELEGRAM_ENABLED="true"
# MAX_ITERATIONS="100"
# SESSION_DURATION_MINUTES="150"
# BREAK_MIN_DURATION="5"
# BREAK_MAX_DURATION="15"
# LOG_LEVEL="info"
# DEBUG="false"

# ============================================================================
# NOTES
# ============================================================================
# 1. Keep this file in .gitignore to prevent accidental credential leaks
# 2. Use different credentials for testing vs production
# 3. Rotate passwords every 30 days
# 4. Monitor logs for unauthorized access attempts
# 5. Use HTTPS in production for all webhooks
# 6. Test credentials before running workflow
#
# Load with: export $(cat .env | xargs)
# Or in Docker: docker-compose --env-file .env up
